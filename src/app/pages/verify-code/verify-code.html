<div class="bg-light min-vh-100">
  <app-header></app-header>

  <main class="container py-5">
    <div class="row justify-content-center">
      <div class="col-12 col-md-8 col-lg-5">
        
        <div class="card shadow-sm border-0 rounded-3">
          <div class="card-body p-4 p-md-5">
            <div class="text-center mb-4">
              <div class="text-primary mb-3">
                <lucide-icon name="mail-check" [size]="48"></lucide-icon>
              </div>
              <h1 class="h3 fw-bold mb-2">Verify Your Code</h1>
              <p class="text-muted mb-0">
                Enter the 6-digit verification code we sent to
                <strong>{{ email }}</strong>
              </p>
            </div>

            <form (ngSubmit)="onSubmit($event)">
              
              <!-- Verification Code Field -->
              <div class="mb-4">
                <label class="form-label d-flex align-items-center gap-2">
                  <lucide-icon name="key" [size]="16"></lucide-icon>
                  Verification Code
                </label>
                <input
                  type="text"
                  [(ngModel)]="code"
                  name="code"
                  placeholder="000000"
                  class="form-control form-control-lg text-center"
                  maxlength="6"
                  [disabled]="loading"
                  required
                  style="letter-spacing: 0.5rem; font-size: 1.5rem; font-weight: bold;"
                />
                <small class="text-muted d-block mt-2 text-center">
                  Check your email inbox or spam folder
                </small>
              </div>

              <!-- Error Message -->
              <div *ngIf="error" class="alert alert-danger d-flex align-items-center mb-3" role="alert">
                <lucide-icon name="alert-circle" [size]="20" class="me-2"></lucide-icon>
                <span>{{ error }}</span>
              </div>

              <!-- Submit Button -->
              <app-button
                type="submit"
                [disabled]="loading || code.length < 6"
                size="lg"
                class="w-100 mb-3"
              >
                <span *ngIf="loading" class="spinner-border spinner-border-sm me-2"></span>
                <lucide-icon *ngIf="!loading" name="check-circle" [size]="18" class="me-2"></lucide-icon>
                {{ loading ? 'Verifying...' : 'Verify Code' }}
              </app-button>

              <!-- Resend Code -->
              <div class="text-center mb-3">
                <button
                  type="button"
                  class="btn btn-link text-decoration-none"
                  (click)="resendCode()"
                  [disabled]="loading"
                >
                  <lucide-icon name="refresh-cw" [size]="16" class="me-1"></lucide-icon>
                  Didn't receive the code? Resend
                </button>
              </div>

              <!-- Back to Forgot Password -->
              <button
                type="button"
                class="btn btn-outline-secondary w-100"
                (click)="navigateToForgotPassword()"
                [disabled]="loading"
              >
                <lucide-icon name="chevron-left" [size]="18" class="me-2"></lucide-icon>
                Back to Enter Email
              </button>
            </form>

            <!-- Help Text -->
            <div class="alert alert-info mt-4 d-flex align-items-start">
              <lucide-icon name="info" [size]="20" class="me-2 mt-1"></lucide-icon>
              <div>
                <strong>Code not working?</strong>
                <ul class="mb-0 ps-3 mt-1">
                  <li>Make sure you entered the correct code</li>
                  <li>The code expires after 10 minutes</li>
                  <li>Check your spam or junk folder</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        
      </div>
    </div>
  </main>

  <app-footer></app-footer>
</div>
